Comprehensive Project Overview: Bartending Shift Entry Web App This is a comprehensive overview of a sophisticated Google Apps Script web app designed to be a personal CRM and analytics tool for a bartender. The app's architecture is a multi-page, card-based system that uses conditional logic, two-way data synchronization, and repeatable field groups to provide an intelligent, user-friendly, and powerful data entry experience. All data is normalized and stored across a series of interconnected Google Sheets, creating a robust relational database. App Architecture & User Interface The application's UI is built on a card-based design for intuitive navigation and data display. Main Page (Dashboard): The landing page acts as a dashboard, displaying a grid of cards. Each card represents a different page of the form (e.g., "Tip Details," "Coworkers," "Parties"). The cards provide a visual summary of the data entered for that page, including icons and key metrics (e.g., total tips, number of coworkers). Page Navigation: Clicking a card on the main dashboard launches the corresponding page. Data Entry & Editing: For pages with repeatable groups (e.g., Coworkers, Parties), a list of previously submitted entries is displayed as individual cards. Each card shows a summary of the data it contains. Clicking a submitted entry's card launches a small pop-up form with the data pre-populated for editing. A single "Add New [Item]" button on each of these pages launches a blank pop-up form for a new entry. Save & Update: An "Update" button on every page saves the data (including any edits or new entries) and returns the user to the main dashboard, which refreshes to reflect the new data. Core Project Components & Logic The project is structured around a series of interconnected pages, each with unique fields and behind-the-scenes logic. 1. Main Page (Page 1) Purpose: Logs core shift metrics and serves as the navigation hub. Fields: shift_date (with a TODAY() default), start_time, end_time, total_tips, location, notes, weather, and shift_mood. Smart Logic: A calculated field, total_hours, automatically determines the shift's duration, including overnight shifts. The shift_type (e.g., Day, Night, Day/Night) is a smart dropdown that auto-fills based on shift times but can be manually overridden. Two-Way Data Sync: start_time, end_time, total_tips, and location are linked for bi-directional synchronization with other pages, ensuring data consistency. 2. Tip Details (Page 2) Purpose: Provides a granular breakdown of tips and calculates key metrics. Fields: total_cash_tips, total_cc_tips, and total_tips_manual. Conditional Logic: The form displays fields for day_cut, mid_cut, or night_cut based on the inferred shift_type. Calculations: A calculated field, calculated_tips, sums the breakdown, but a manual override field allows for corrections. hourly_tips is calculated as a key performance metric. A repeatable group, tip_out_received, tracks tips received from other bartenders. 3. Coworkers (Page 3) Purpose: Logs which coworkers were on shift. Fields: A repeatable group for each coworker to log their name, position, start_time, end_time, and location. Coworker Rating (1-5) and Coworker Notes fields allow for qualitative feedback. Smart Logic: An entry for the user is automatically pre-populated and two-way synced with the Main Page. Coworker position and location fields are dynamic, filtering options based on coworker data and conditional rules (e.g., location only appears for bartenders). 4. Party Details (Page 4) Purpose: Documents details for private parties. Repeatable Group: parties allows for logging multiple events. Calculations: total_people_calc and total_party_tip_calc provide automatic sums, both with manual override fields. Party Duration is a calculated field. 5. Chump Change (Page 5) Purpose: Records the outcome of the "chump change" game. Fields: chump_amount_total, with a hidden "advanced" mode to break down bills and coins. Advanced Logic: A repeatable group for opponents tracks their participation and any cash_added. The chump_winner field is auto-calculated based on a custom Flip Log pop-up logic, but can be manually overridden. Pop-up Forms: The "Flip Log" pop-up handles multi-round coin flips (including a Drop result), while a "Flip In" pop-up logs participants who weren't on the shift. Two-way sync is used for cash_added between the main form and the pop-up. 6. Bets (Page 6) Purpose: Logs personal bets made during the shift. Card-Based UI: The page displays three cards for "Sports Bet," "Chump Guess," and "Other Bet." Clicking a card launches a small pop-up form. Calculations: A calculated Profit/Loss field determines the financial outcome of each bet based on user-defined formulas. Flexible Opponents: Allows for selecting opponents from the Coworker database or entering a custom name. 7. Tip Adjustments (Page 7) Purpose: Tracks and justifies changes to total tips. Card-Based UI: Three cards with pop-up forms for Clerical Error, Gain on Late Tip, and Supplement adjustments. Each pop-up includes a reason dropdown. Functionality: This page provides a clear audit trail for any changes to the tip total. 8. Other (Page 8) Purpose: Logs miscellaneous personal data. Pop-up Forms: Four separate pop-ups for various logs: Times, Drinks, Personal, and Extra. 9. Tip Calculation for Closers (Page 9) Purpose: Automates tip division for closers on a night shift. Fields: A dynamic table of all bartenders and their hours, with editable fields and a checkbox to exclude them from the calculation. Calculations: The form automatically sums the hours, calculates the hourly_rate, and divides the total_tips among participants. It also displays any rounding remainder. Database & Data Schema The back-end is a series of interconnected Google Sheets that serves as a normalized database. Data integrity is maintained through foreign keys that link related data across sheets. Sheet Name	Data Stored	Relationships (Foreign Keys) Shifts	Main shift data, total tips, chump change.	Links to Locations and Coworkers via location_id and coworker_id. Tip_Details	Party cuts and tips received from other bartenders.	Links to Shifts via shift_id. Shift_Coworkers	Coworkers on a specific shift.	Links to Shifts via shift_id and Coworkers via coworker_id. Parties	Detailed data for each private party.	Links to Shifts via shift_id. Chump_Log	Records of chump opponents and flip outcomes.	Links to Shifts via shift_id. Bets	Records of each bet placed.	Links to Shifts via shift_id. Tip_Adjustments	All tip adjustment entries.	Links to Shifts via shift_id. Personal_Log	Miscellaneous personal data.	Links to Shifts via shift_id. Coworkers (CRM)	Master list of all coworkers, positions, and contact info. Locations	Master list of all bar locations. Positions	Master list of all job positions. Events	All bar events and beer promos. Tip_Calc	Tip division calculation data.	Links to Shifts via shift_id.
